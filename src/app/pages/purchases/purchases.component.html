@let purchaseList = purchaseList$ | async;
<!-- @let addedNames = addedProductNames$ | async; -->

<div class="purchases-container">
  <app-purchase-entry
    (itemAdded)="onItemAdded($event)">
  </app-purchase-entry>

  <app-purchase-list
    [purchaseList]="purchaseList!"
    (itemDeleted)="onItemDeleted($event)">
  </app-purchase-list>

  @if (purchaseList && purchaseList.length > 0) {
    <div class="save-purchase-container">
      <mat-form-field appearance="outline" class="supplier-field">
        <mat-label>Supplier (Optional)</mat-label>
        <mat-select [(ngModel)]="selectedSupplier">
          @for (supplier of (suppliers$ | async); track supplier.id) {
            <mat-option [value]="supplier">{{ supplier.name }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
      <button mat-raised-button color="primary" class="save-button" (click)="savePurchase()">
        <mat-icon>save</mat-icon> Save Purchase
      </button>
    </div>
  }
</div>